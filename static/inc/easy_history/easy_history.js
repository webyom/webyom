var easyHistory=function(){function q(a){if(a!=e){r=e;e=a;j.ie&&(!document.documentMode||document.documentMode<8)&&s(a)}}function d(a){a=f(a)?a:l();j.safari&&!g&&typeof window.onhashchange=="undefined"&&setTimeout(arguments.callee,m);if(!(a==e||!f(a))){$.console.log("easyHistory found mark changed, "+a);q(a);n&&n.call(t,a,u(a))}}function s(a){if(c)if(c.contentWindow&&c.contentWindow.document){var b=c.contentWindow.document;if(a!=b.getElementById("mark").value){b.open();b.write(["<html>","<head><title>"+
document.title+"</title></head>","<body>",'<textarea id="mark">'+a+"</textarea>",'<script type="text/javascript">var mark = document.getElementById("mark").value;if(mark || parent.location.hash) {parent.location.hash = "!" + mark;}<\/script></body></html>'].join(""));b.close()}}else setTimeout(function(){s(a)},100);else{c=document.createElement("iframe");c.id="easyHistoryIeFrame";c.style.display="none";c.src=v+"#"+a;c=document.body.appendChild(c)}}function f(a){return typeof a=="string"&&!/^[#!\/]/.test(a)}
function u(a){return h[k[a]]}function l(){return g?location.pathname.replace(/^\//,""):location.hash?location.hash.replace(/^#!\/?/,""):""}var v="/static/inc/easy_history/history_blank.html",m=100,i=navigator.userAgent.toLowerCase(),j={ie:/msie/.test(i)&&!/opera/.test(i),safari:/safari/.test(i)&&!/chrome/.test(i)&&!/android/.test(i)},c=null,k={},h=[],o=true,p=100,r,e,n=null,t=null,g=!!history.pushState;return{init:function(a){a=a||{};o=typeof a.cacheEnabled!="undefined"?a.cacheEnabled:o;p=a.cacheSize||
p;if(g){a=window;a.addEventListener?a.addEventListener("popstate",d,false):a.attachEvent("onpopstate",d)}else if(!(j.ie&&(!document.documentMode||document.documentMode<8))&&typeof window.onhashchange!="undefined"){a=window;a.addEventListener?a.addEventListener("hashchange",d,false):a.attachEvent("onhashchange",d)}else j.safari?setTimeout(d,m):setInterval(d,m);a=l();d(f(a)?a:"")},setListener:function(a,b){n=typeof a=="function"?a:null;t=b||null},setCache:function(a,b){if(f(a))if(o){h.push(b);k[a]=
h.length-1;delete h[k[a]-p]}},getCache:u,clearCache:function(){k={};h=[]},setMark:function(a,b,w){if(b)document.title=b;if(!(a==e||!f(a))){if(g)history.pushState(w,b||document.title,"/"+a);else location.hash="!"+a;q(a)}},getMark:l,getPrevMark:function(){return r},isSupportHistoryState:function(){return g}}}();
