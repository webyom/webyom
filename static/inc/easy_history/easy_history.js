var easyHistory=function(){function q(a){if(a!=e){r=e;e=a;if(i.ie&&i.version<8)if(j){if(a!=j.contentWindow.location.search.replace(/^\?/,""))j.src=s+"?"+a}else{var b=document.createElement("iframe");b=document.body.appendChild(b);b.id="easyHistoryIeFrame";b.style.display="none";b.src=s+"?"+a;j=b}}}function c(a){a=f(a)?a:l();i.safari&&!g&&typeof window.onhashchange=="undefined"&&setTimeout(arguments.callee,m);if(!(a==e||!f(a))){$.console.log("easyHistory found mark changed, "+a);q(a);n&&n.call(t,a,
u(a))}}function f(a){return typeof a=="string"&&!/^[#!\/]/.test(a)}function u(a){return h[k[a]]}function l(){return g?location.pathname.replace(/^\//,""):location.hash?location.hash.replace(/^#!\/?/,""):""}var s="/static/inc/easy_history/history_blank.html",m=100,d=navigator.userAgent.toLowerCase(),i={version:+(d.match(/(?:version|firefox|chrome|safari|opera|msie)[\/: ]([\d]+)/)||[0,0])[1],ie:/msie/.test(d)&&!/opera/.test(d),safari:/safari/.test(d)&&!/chrome/.test(d)&&!/android/.test(d)},j=null,k=
{},h=[],o=true,p=100,r,e,n=null,t=null,g=!!history.pushState;return{init:function(a){a=a||{};o=typeof a.cacheEnabled!="undefined"?a.cacheEnabled:o;p=a.cacheSize||p;if(g){a=window;a.addEventListener?a.addEventListener("popstate",c,false):a.attachEvent("onpopstate",c)}else if(typeof window.onhashchange!="undefined"){a=window;a.addEventListener?a.addEventListener("hashchange",c,false):a.attachEvent("onhashchange",c)}else i.safari?setTimeout(c,m):setInterval(c,m);a=l();c(f(a)?a:"")},setListener:function(a,
b){n=typeof a=="function"?a:null;t=b||null},setCache:function(a,b){if(f(a))if(o){h.push(b);k[a]=h.length-1;delete h[k[a]-p]}},getCache:u,clearCache:function(){k={};h=[]},setMark:function(a,b,v){if(b)document.title=b;if(!(a==e||!f(a))){if(g)history.pushState(v,b||document.title,"/"+a);else location.hash="!"+a;q(a)}},getMark:l,getPrevMark:function(){return r},isSupportHistoryState:function(){return g}}}();
