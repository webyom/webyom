$.Event.VirtualTouchEventHandler=function(a){this._delegateEl=a;this._srcElement=null;this._startTime=this._endPointX=this._endPointY=this._startPointX=this._startPointY=0;this._init()};
$.Event.VirtualTouchEventHandler.prototype={_init:function(){$.Event.addListener(this._delegateEl,"touchstart",this);$.Event.addListener(this._delegateEl,"touchmove",this);$.Event.addListener(this._delegateEl,"touchend",this)},_dispatch:function(){},_touchstart:function(a){this._srcElement=a.srcElement;if(this._srcElement.nodeType==3)this._srcElement=this._srcElement.parentNode;this._startPointX=this._endPointX=a.targetTouches[0].pageX;this._startPointY=this._endPointY=a.targetTouches[0].pageY;this._startTime=
new Date},_touchmove:function(a){this._endPointX=a.targetTouches[0].pageX;this._endPointY=a.targetTouches[0].pageY},_touchend:function(){},handleEvent:function(a){this["_"+a.type](a)},destroy:function(){$.Event.removeListener(this._delegateEl,"touchstart",this);$.Event.removeListener(this._delegateEl,"touchmove",this);$.Event.removeListener(this._delegateEl,"touchend",this)},constructor:$.Event.VirtualTouchEventHandler};
$.Event.TouchEventHandler=function(){$.Event.TouchEventHandler.superClass.constructor.apply(this,$.array.getArray(arguments))};$.Class.extend($.Event.TouchEventHandler,$.Event.VirtualTouchEventHandler);$.Event.TouchEventHandler.prototype._distanceLimit=15;$.Event.TouchEventHandler.prototype._timeLimit=400;$.Event.TouchEventHandler.prototype._dispatch=function(){var a=document.createEvent("Events");a.initEvent("touch",true,false);this._srcElement.dispatchEvent(a)};
$.Event.TouchEventHandler.prototype._touchend=function(){new Date-this._startTime>this._timeLimit||Math.abs(this._endPointX-this._startPointX)>this._distanceLimit||Math.abs(this._endPointY-this._startPointY)>this._distanceLimit||this._dispatch()};$.Event.addCustomizedEvent("touch",$.Event.TouchEventHandler);$.Event.SlideEventHandler=function(){$.Event.SlideEventHandler.superClass.constructor.apply(this,$.array.getArray(arguments))};$.Class.extend($.Event.SlideEventHandler,$.Event.VirtualTouchEventHandler);
$.Event.SlideEventHandler.prototype._distanceLimitX=160;$.Event.SlideEventHandler.prototype._distanceLimitY=40;$.Event.SlideEventHandler.prototype._timeLimit=400;$.Event.SlideEventHandler.prototype._dispatch=function(){var a=document.createEvent("Events");a.initEvent("slide",true,false);a.direction=this._endPointX>this._startPointX?1:0;this._srcElement.dispatchEvent(a)};
$.Event.SlideEventHandler.prototype._touchmove=function(a){this._endPointX=a.targetTouches[0].pageX;this._endPointY=a.targetTouches[0].pageY;new Date-this._startTime<this._timeLimit&&Math.abs(this._endPointX-this._startPointX)>20&&Math.abs(this._endPointY-this._startPointY)<this._distanceLimitY&&a.preventDefault()};
$.Event.SlideEventHandler.prototype._touchend=function(){new Date-this._startTime>this._timeLimit||Math.abs(this._endPointX-this._startPointX)<this._distanceLimitX||Math.abs(this._endPointY-this._startPointY)>this._distanceLimitY||this._dispatch()};$.Event.addCustomizedEvent("slide",$.Event.SlideEventHandler);
