YOM.Event.VirtualTouchEventHandler=function(a){this._delegateEl=a;this._srcElement=null;this._startTime=this._endPointX=this._endPointY=this._startPointX=this._startPointY=0;this._init()};
YOM.Event.VirtualTouchEventHandler.prototype={_init:function(){YOM.Event.addListener(this._delegateEl,"touchstart",this);YOM.Event.addListener(this._delegateEl,"touchmove",this);YOM.Event.addListener(this._delegateEl,"touchend",this)},_dispatch:function(){},_touchstart:function(a){this._srcElement=a.srcElement;if(this._srcElement.nodeType==3)this._srcElement=this._srcElement.parentNode;this._startPointX=this._endPointX=a.targetTouches[0].pageX;this._startPointY=this._endPointY=a.targetTouches[0].pageY;
this._startTime=new Date},_touchmove:function(a){this._endPointX=a.targetTouches[0].pageX;this._endPointY=a.targetTouches[0].pageY},_touchend:function(){},handleEvent:function(a){this["_"+a.type](a)},destroy:function(){YOM.Event.removeListener(this._delegateEl,"touchstart",this);YOM.Event.removeListener(this._delegateEl,"touchmove",this);YOM.Event.removeListener(this._delegateEl,"touchend",this)},constructor:YOM.Event.VirtualTouchEventHandler};
YOM.Event.TouchEventHandler=function(){YOM.Event.TouchEventHandler.superClass.constructor.apply(this,YOM.array.getArray(arguments))};YOM.Class.extend(YOM.Event.TouchEventHandler,YOM.Event.VirtualTouchEventHandler);YOM.Event.TouchEventHandler.prototype._distanceLimit=15;YOM.Event.TouchEventHandler.prototype._timeLimit=400;YOM.Event.TouchEventHandler.prototype._dispatch=function(){var a=document.createEvent("Events");a.initEvent("touch",true,false);this._srcElement.dispatchEvent(a)};
YOM.Event.TouchEventHandler.prototype._touchend=function(){new Date-this._startTime>this._timeLimit||Math.abs(this._endPointX-this._startPointX)>this._distanceLimit||Math.abs(this._endPointY-this._startPointY)>this._distanceLimit||this._dispatch()};YOM.Event.addCustomizedEvent("touch",YOM.Event.TouchEventHandler);YOM.Event.SlideEventHandler=function(){YOM.Event.SlideEventHandler.superClass.constructor.apply(this,YOM.array.getArray(arguments))};YOM.Class.extend(YOM.Event.SlideEventHandler,YOM.Event.VirtualTouchEventHandler);
YOM.Event.SlideEventHandler.prototype._distanceLimitX=160;YOM.Event.SlideEventHandler.prototype._distanceLimitY=40;YOM.Event.SlideEventHandler.prototype._timeLimit=400;YOM.Event.SlideEventHandler.prototype._dispatch=function(){var a=document.createEvent("Events");a.initEvent("slide",true,false);a.direction=this._endPointX>this._startPointX?1:0;this._srcElement.dispatchEvent(a)};
YOM.Event.SlideEventHandler.prototype._touchmove=function(a){this._endPointX=a.targetTouches[0].pageX;this._endPointY=a.targetTouches[0].pageY;new Date-this._startTime<this._timeLimit&&Math.abs(this._endPointX-this._startPointX)>20&&Math.abs(this._endPointY-this._startPointY)<this._distanceLimitY&&a.preventDefault()};
YOM.Event.SlideEventHandler.prototype._touchend=function(){new Date-this._startTime>this._timeLimit||Math.abs(this._endPointX-this._startPointX)<this._distanceLimitX||Math.abs(this._endPointY-this._startPointY)>this._distanceLimitY||this._dispatch()};YOM.Event.addCustomizedEvent("slide",YOM.Event.SlideEventHandler);
