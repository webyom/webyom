if(!$)var $={};
$.localStorage=function(){function h(a,b,c){var d,g;c=c||{};if(b!==null&&e.name=="cookie")b=b||m;if(b&&!e.noProxy){b=typeof b=="object"&&b.src||m;g=c.cb;c.cb=function(j){document.body.removeChild(d);g&&g(j)};d=document.createElement("iframe");d.src=b;d.style.display="none";d=document.body.appendChild(d);d.action=a;for(var f in c)d[f]=c[f]}else return p[a](c)}function n(a,b,c){function d(f,j){var k;if(f){if(k=f.match(/(.*)\[expires=(\d+)\]$/))if(k[2]<(new Date).getTime()){f=undefined;g.push(j)}else f=
k[1]}else f=undefined;return f}var g=[];if(typeof a=="object")$.object.each(a,function(f,j){a[j]=d(f,j)});else a=d(a,b);g.length&&o(g.join(" "),{proxy:c});return a}function o(a,b){b=b||{};return h("remove",b.proxy,{key:a})}var m="/static/inc/webyom-js/local_storage_proxy.html",e={name:"default",noProxy:true,db:{},set:function(a,b){this.db[a]=b},get:function(a){return this.db[a]},remove:function(a){delete this.db[a]},clear:function(){this.db={}}},l=[{name:"localStorage",isSupported:!!window.localStorage,
set:function(a,b){localStorage.setItem(a,b)},get:function(a){return localStorage.getItem(a)},remove:function(a){localStorage.removeItem(a)},clear:function(){localStorage.clear()},init:function(){}},{name:"globalStorage",isSupported:!!window.globalStorage,db:null,set:function(a,b){try{this.db.setItem(a,b);return 1}catch(c){return 0}},get:function(a){var b;try{b=(b=this.db.getItem(a))&&b.value||b}catch(c){}return b},remove:function(a){try{db.removeItem(a)}catch(b){}},clear:function(){try{for(var a in this.db)this.db.removeItem(a)}catch(b){}},
init:function(){this.db=globalStorage[document.domain]}},{name:"userData",isSupported:!!window.ActiveXObject,db:null,set:function(a,b){var c=this.db.expires.toString();if(c!==""&&c.indexOf("1983")!==-1)this.db.expires=(new Date(+new Date+31536E6)).toUTCString();try{this.db.setAttribute(a,b);this.db.save("WEBYOM_LOCAL_STORAGE");return 1}catch(d){return 0}},get:function(a){this.db.load("WEBYOM_LOCAL_STORAGE");return this.db.getAttribute(a)},remove:function(a){this.db.removeAttribute(a);this.db.save("WEBYOM_LOCAL_STORAGE")},
clear:function(){this.db.expires=(new Date(4176288E5)).toUTCString();this.db.save("WEBYOM_LOCAL_STORAGE")},init:function(){this.db=document.documentElement||document.body;this.db.addBehavior("#default#userdata");this.db.load("WEBYOM_LOCAL_STORAGE")}},{name:"cookie",isSupported:typeof document.cookie=="string",set:function(a,b,c){var d;c=c||720;d=new Date;d.setTime(d.getTime()+36E5*c);document.cookie=a+"="+b+"; "+("expires="+d.toGMTString()+"; ")+"path=/static/inc/webyom-js/; domain=webyom.org;"},
get:function(a){return(a=document.cookie.match(RegExp("(?:^|;\\s*)"+a+"=([^;]*)")))&&a[1]},remove:function(a){this.set(a,"",-24)},clear:function(){var a=document.cookie.match(/\w+=[^;]*/g);if(a)for(var b=0,c=a.length;b<c;b++)this.remove(a[b].split("=")[0])},init:function(){}}];for(i=0;i<l.length;i++)if(l[i].isSupported){e=l[i];e.init();break}var p={set:function(a){var b=e.set(a.key,a.val,a.life);return a.cb?a.cb(b):b},get:function(a){var b,c=a.key.split(" ");if(c.length>1){b={};$.object.each(c,function(d){b[d]=
e.get(d)})}else b=e.get(c[0]);return a.cb?a.cb(b):b},remove:function(a){var b=a.key.split(" ");b.length>1?$.object.each(b,function(c){e.remove(c)}):e.remove(b[0]);a.cb&&a.cb()},clear:function(a){e.clear();a.cb&&a.cb()}};return{_ID:121,_db:e,_do:h,set:function(a,b,c){c=c||{};if(c.life&&e.name!="cookie")b+="[expires="+((new Date).getTime()+c.life*36E5)+"]";return h("set",c.proxy,{key:a,val:b,cb:c.callback,life:c.life})},get:function(a,b){var c;b=b||{};if(b.callback)return h("get",b.proxy,{key:a,cb:function(d){b.callback(n(d,
a,b.proxy))}});else{c=h("get",b.proxy,{key:a});return n(c,a,b.proxy)}},remove:o,clear:function(a){a=a||{};return h("clear",a.proxy,{})}}}();
